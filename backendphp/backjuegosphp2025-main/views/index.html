<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üéÆ API de Juegos - Documentaci√≥n</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #e0e0e0;
      margin: 0;
      padding: 20px;
      line-height: 1.7;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #1e1e1e;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      border: 1px solid #333;
    }

    h1 {
      color: #4db6ac;
      text-align: center;
      margin-bottom: 10px;
      font-weight: 600;
    }

    p.subtitle {
      text-align: center;
      color: #9e9e9e;
      font-style: italic;
      margin-bottom: 30px;
    }

    .status {
      text-align: center;
      padding: 12px;
      background: #2e7d32;
      color: #ffffff;
      border-radius: 6px;
      font-weight: bold;
      margin-bottom: 30px;
      font-size: 1.1em;
    }

    .section {
      margin-bottom: 35px;
      border-left: 4px solid #03a9f4;
      padding-left: 16px;
    }

    .section-title {
      color: #64b5f6;
      font-size: 1.4em;
      margin: 10px 0;
      display: inline-block;
      background: #2a2a2a;
      padding: 8px 16px;
      border-radius: 6px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.3);
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      background: #2a2a2a;
      margin: 8px 0;
      padding: 14px 18px;
      border-left: 5px solid #03a9f4;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      transition: background 0.2s;
    }

    li:hover {
      background: #333;
      transform: scale(1.01);
    }

    code {
      background: #333;
      color: #80deea;
      padding: 3px 8px;
      border-radius: 6px;
      font-size: 0.95em;
      border: 1px solid #424242;
    }

    .badge {
      display: inline-block;
      background: #03a9f4;
      color: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 0.85em;
      font-weight: bold;
      margin-right: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    .info-box {
      background: #262626;
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
      border: 1px solid #424242;
      font-size: 0.95em;
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      color: #757575;
      font-size: 0.9em;
      padding-top: 20px;
      border-top: 1px solid #424242;
    }

    .container {
      animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéÆ API de Juegos</h1>
    <p class="subtitle">Sistema de gesti√≥n de videojuegos con Node.js + Express + MySQL</p>

    <div class="status">‚úÖ Servidor activo en el puerto {{PORT}}</div>

    <!-- Secci√≥n: G√©neros -->
    <div class="section">
      <h2 class="section-title">üìö G√©neros</h2>
      <ul>
        <li><span class="badge">GET</span> <strong>/api/generos</strong> <br><small>Obtiene todos los g√©neros disponibles</small></li>
        <li><span class="badge">GET</span> <strong>/api/generos/:id</strong> <br><small>Obtiene un g√©nero espec√≠fico por ID</small></li>
        <li><span class="badge">POST</span> <strong>/api/generos</strong> <br><small>Crea un nuevo g√©nero (JSON: { nombre })</small></li>
        <li><span class="badge">PUT</span> <strong>/api/generos/:id</strong> <br><small>Actualiza un g√©nero existente</small></li>
        <li><span class="badge">DELETE</span> <strong>/api/generos/:id</strong> <br><small>Elimina un g√©nero por ID</small></li>
      </ul>
    </div>

    <!-- Secci√≥n: Plataformas -->
    <div class="section">
      <h2 class="section-title">üïπÔ∏è Plataformas</h2>
      <ul>
        <li><span class="badge">GET</span> <strong>/api/plataformas</strong> <br><small>Lista todas las plataformas</small></li>
        <li><span class="badge">GET</span> <strong>/api/plataformas/:id</strong> <br><small>Obtiene una plataforma por ID</small></li>
        <li><span class="badge">POST</span> <strong>/api/plataformas</strong> <br><small>Crea una nueva plataforma (JSON: { nombre })</small></li>
        <li><span class="badge">PUT</span> <strong>/api/plataformas/:id</strong> <br><small>Actualiza una plataforma existente</small></li>
        <li><span class="badge">DELETE</span> <strong>/api/plataformas/:id</strong> <br><small>Elimina una plataforma por ID</small></li>
      </ul>
    </div>

    <!-- Secci√≥n: Juegos -->
    <div class="section">
      <h2 class="section-title">üéØ Juegos</h2>
      <ul>
        <li><span class="badge">GET</span> <strong>/api/juegos</strong> <br><small>Obtiene todos los juegos con sus relaciones (g√©nero, plataforma)</small></li>
        <li><span class="badge">GET</span> <strong>/api/juegos/:id</strong> <br><small>Obtiene un juego espec√≠fico por ID</small></li>
        <li><span class="badge">POST</span> <strong>/api/juegos</strong> <br><small>Crea un nuevo juego. Usa <code>multipart/form-data</code> con campo <code>imagen</code></small></li>
        <li><span class="badge">PUT</span> <strong>/api/juegos/:id</strong> <br><small>Actualiza un juego existente. Tambi√©n admite nueva imagen</small></li>
        <li><span class="badge">DELETE</span> <strong>/api/juegos/:id</strong> <br><small>Elimina un juego por ID (la imagen se borra del servidor)</small></li>
      </ul>
    </div>

    <!-- Secci√≥n: Dashboard -->
    <div class="section">
      <h2 class="section-title">üìä Resumen (Dashboard)</h2>
      <ul>
        <li><span class="badge">GET</span> <strong>/api/dashboard/resumen</strong> <br><small>Devuelve estad√≠sticas: total juegos, g√©neros, plataformas, juegos por g√©nero, etc.</small></li>
      </ul>
    </div>

    <!-- Subida de im√°genes -->
    <h2>üñºÔ∏è Subida de Im√°genes</h2>
    <div class="info-box">
      <p><strong>Multer</strong> maneja la subida de im√°genes:</p>
      <ul style="padding-left: 15px;">
        <li>Las im√°genes se guardan en: <code>uploads/juegos/img/</code></li>
        <li>Nombre generado autom√°ticamente (ej: <code>juego_1722234567890-123456789.jpg</code>)</li>
        <li>Acceso p√∫blico en: <code>http://localhost:{{PORT}}/uploads/juegos/img/nombre-imagen.jpg</code></li>
      </ul>
    </div>

    <!-- Base de datos -->
    <h2>üîå Base de Datos</h2>
    <div class="info-box">
      <p>Conexi√≥n a MySQL usando <code>mysql2</code>. Modelo relacional entre juegos, g√©neros y plataformas.</p>
      <p>Configuraci√≥n cargada desde <code>.env</code> (HOST, USER, PASS, DB, PORT).</p>
    </div>

    <!-- Procesos -->
    <h2>üõ†Ô∏è Procesos del Servidor</h2>
    <div class="info-box">
      <ul style="padding-left: 0;">
        <li><strong>CORS:</strong> Habilitado para todas las solicitudes</li>
        <li><strong>Body Parser:</strong> JSON y form-data soportados</li>
        <li><strong>Multer:</strong> Middleware para subir y procesar im√°genes</li>
        <li><strong>Logging:</strong> Middleware de depuraci√≥n activo (ver consola del servidor)</li>
      </ul>
    </div>

    <!-- Footer -->
    <div class="footer">
      API desarrollada con Express.js ‚Ä¢ <em>Actualizado: <span id="fecha"></span></em>
      <p>Desarrollado por <a href="https://www.arsistema.com" target="_blank">Ar Sistema</a></p>
    </div>
  </div>

  <script>
    document.getElementById('fecha').textContent = new Date().toLocaleString('es-ES');
  </script>
</body>
</html>